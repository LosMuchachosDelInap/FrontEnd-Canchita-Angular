<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <!-- Campos para crear/editar/ver cancha -->
  <div class="form-section">
    <!-- Nombre y Tipo -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Nombre de la Cancha</mat-label>
        <input matInput formControlName="nombre" placeholder="Ej: Monumental" [readonly]="isReadOnlyMode()">
        <mat-icon matSuffix>sports_soccer</mat-icon>
        @if (form.get('nombre')?.hasError('required')) {
          <mat-error>El nombre es requerido</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Tipo de Cancha</mat-label>
        <mat-select formControlName="tipo" [disabled]="isReadOnlyMode()">
          @for (tipo of tiposCancha; track tipo.value) {
            <mat-option [value]="tipo.value">
              {{tipo.label}}
            </mat-option>
          }
        </mat-select>
        <mat-icon matSuffix>category</mat-icon>
        @if (form.get('tipo')?.hasError('required')) {
          <mat-error>El tipo es requerido</mat-error>
        }
      </mat-form-field>
    </div>

    <!-- Precio y Estado -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Precio por Hora</mat-label>
        <input matInput type="number" formControlName="precio" placeholder="0" min="1" [readonly]="isReadOnlyMode()">
        <span matPrefix>$&nbsp;</span>
        <mat-icon matSuffix>attach_money</mat-icon>
        @if (form.get('precio')?.hasError('required')) {
          <mat-error>El precio es requerido</mat-error>
        }
        @if (form.get('precio')?.hasError('min')) {
          <mat-error>El precio debe ser mayor a 0</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Estado</mat-label>
        <mat-select formControlName="habilitado" [disabled]="isReadOnlyMode()">
          @for (estado of estadosCancha; track estado.value) {
            <mat-option [value]="estado.value">
              {{estado.label}}
            </mat-option>
          }
        </mat-select>
        <mat-icon matSuffix>toggle_on</mat-icon>
        @if (form.get('habilitado')?.hasError('required')) {
          <mat-error>El estado es requerido</mat-error>
        }
      </mat-form-field>
    </div>

    <!-- Descripción -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Descripción</mat-label>
      <textarea 
        matInput 
        formControlName="descripcion" 
        placeholder="Descripción de la cancha (opcional)"
        rows="3"
        [readonly]="isReadOnlyMode()">
      </textarea>
      <mat-icon matSuffix>description</mat-icon>
    </mat-form-field>

    <!-- Información para modo de solo lectura -->
    @if (isReadOnlyMode()) {
      <div class="readonly-info">
        <mat-icon>visibility</mat-icon>
        <span>Estás viendo los detalles de la cancha. Para modificar, usa el botón de editar.</span>
      </div>
    }
  </div>

  <!-- Botones de acción -->
  <div class="form-actions">
    @if (isReadOnlyMode()) {
      <!-- Solo botón de cerrar para modo de solo lectura -->
      <button 
        mat-raised-button 
        color="primary" 
        type="button" 
        (click)="onCancel()">
        <mat-icon>close</mat-icon>
        Cerrar
      </button>
    } @else {
      <!-- Botones normales para modos de edición -->
      <button 
        mat-button 
        type="button" 
        (click)="onCancel()"
        [disabled]="loading">
        Cancelar
      </button>
      
      <button 
        mat-raised-button 
        color="primary" 
        type="submit"
        [disabled]="form.invalid || loading">
        @if (loading) {
          <ng-container>
            <mat-spinner diameter="20"></mat-spinner>
            <span>{{ getLoadingText() }}</span>
          </ng-container>
        } @else {
          <ng-container>
            <mat-icon>save</mat-icon>
            <span>{{ getSubmitButtonText() }}</span>
          </ng-container>
        }
      </button>
    }
  </div>
</form>
